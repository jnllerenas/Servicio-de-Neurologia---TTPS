{% extends '::base.html.twig' %}


{% block datosPaciente %}
    {% if paciente %}
        <div>    
        <h3>{{paciente.apellido}}, {{paciente.nombre}}</h3>
        <h4>+ datos personales</h4>
        </div>
    {% endif %}
{% endblock %}

{% block body %}

    {% if paciente %}
    
    <div>
        <hr>
        <h2>HISTORIA CLINICA</h2>
        {% if historia %}
            <h5>Enfermedad Actual:</h5> {{ historia.enfermedad }}<br>
            <h5>Atendido Por:</h5> {{ historia.usuario }} <br>
            <h5>Motivo:</h5> {{ historia.motivo }} <br>
            <h5>Derivado por:</h5> {{ historia.departamento }} <br>
            <hr><br>
            {% for i in listado %}
                {{ i.fecha|date('Y-m-d') }} - {{ i.tipo }}{% if i.tipoDetalle %},{{ i.tipoDetalle }}{% endif %}:
                
                {{i.descripcion}}{% if i.droga %}--Droga:<br>
                                       {% for d in i.droga %}
                                           * {{ d.droga }} ({{d.dosis}})<br>
                                       {% endfor %}
                                 {% endif %}<br>
            {% endfor %}
        {% else %}
            {{ form(iniciar) }}
            <hr>
        {% endif %}
    </div>  
        <br>
        <div>
        {% if historia %}
            <ul class="nav nav-tabs" id='ulTab' onload='funcion();'>
            <li role="presentation" onclick='activar(this);' id='liTab1'><a href="{{ url('neurologia_historia_clinica_homepage', {'idpaciente': paciente.id,'solapa':'Motivo:index'}) }}">Motivo</a></li>
            <li role="presentation" onclick='activar(this);' id='liTab2'><a href="{{ url('neurologia_historia_clinica_homepage', {'idpaciente': paciente.id,'solapa':'Enfermedad:index'}) }}">Enfermadad Actual</a></li>
            </ul>
            {% if solapa is defined %}
                {{ solapa|raw }}
                <script>
                        var tab = '{{ nro }}';
                        li = document.getElementById ("ulTab").getElementsByTagName("LI");
                        for(i = 0; i < li.length; ++i){
                                li[i].setAttribute("class", "");
                        }
                        objeto = document.getElementById('liTab'+tab);
                        objeto.setAttribute("class", "active");	
                </script>
            {% endif %}
        {% else %}
            Inicie la historia para empezar
        {% endif %}
        </div>
{% else %}
    error
{% endif %}
{% endblock %}
