{% extends '::base.html.twig' %}


{% block datosPaciente %}
    {% if paciente %}
        <div>    
        <h3>{{paciente.apellido}}, {{paciente.nombre}}</h3>
        
            <img  href="{{ asset('/NeurologiaHistoriaClinicaBundle/image/mas.png') }}" alt="Mostrar" class="boton" />
       
        Datos Personales<br>
        <div class="oculto">
            {% if paciente.tipoDocumento %}-{{paciente.tipoDocumento.descripcion}}:     {{ paciente.documento }}<br>{% endif %}
            {% if paciente.sexo %}-Sexo:    {{paciente.sexo.descripcion}}<br>{% endif %}
            -Obra Social:{% if paciente.obraSocial %}   {{paciente.obraSocial.descripcion}} N°({{ paciente.numeroCarnet }}){% else %} No tiene.{%endif%}<br>
            {% if paciente.email %}-Mail:    {{paciente.email}}<br>{% endif %}
            {% if paciente.nivelEducacional %}-Nivel de educación:    {{paciente.nivelEducacional.descripcion}}<br>{% endif %}
            {% if paciente.direccion %}-Dirección:    {{paciente.direccion}}<br>{% endif %}
            {% if paciente.fechaNacimiento %}-Fecha Nacimiento:    {{paciente.fechaNacimiento|date('Y-m-d')}}<br>{% endif %}
            {% if paciente.telefono %}-Teléfono:    {{paciente.telefono}}<br>{% endif %}
            {% if paciente.ocupacion %}-Ocupacion:    {{paciente.ocupacion}}<br>{% endif %}
        </div>
        </div>
                <script>
                        $(document).ready(function(){
                            $('.oculto').hide();
                            $(".boton").click(function(){
                                 $('.oculto').toggle();
                              });
                          });
                </script>
    {% endif %}
{% endblock %}

{% block body %}

    {% if paciente %}
    
    <div>
        <hr>
        <h2>HISTORIA CLINICA</h2>
        {% if historia %}
            <h5>Enfermedad Actual:</h5> {{ historia.enfermedad }}<br>
            <h5>Atendido Por:</h5> {{ historia.usuario }} <br>
            <h5>Motivo:</h5> {{ historia.motivo }} <br>
            <h5>Derivado por:</h5> {{ historia.departamento }} <br>
            <hr><br>
            {% for i in listado %}
                {{ i.fecha|date('Y-m-d') }} - {{ i.tipo }}{% if i.tipoDetalle %},{{ i.tipoDetalle }}{% endif %}:
                
                {{i.descripcion}}{% if i.droga %}--Droga:<br>
                                       {% for d in i.droga %}
                                           * {{ d.droga }} ({{d.dosis}})<br>
                                       {% endfor %}
                                 {% endif %}<br>
            {% endfor %}
        {% else %}
            {{ form(iniciar) }}
            <hr>
        {% endif %}
    </div>  
        <br>
        <div>
        {% if historia %}
            <ul class="nav nav-tabs" id='ulTab' onload='funcion();'>
            <li role="presentation" onclick='activar(this);' id='liTabMotivo'><a href="{{ url('neurologia_historia_clinica_homepage', {'idpaciente': paciente.id,'solapa':'Motivo'}) }}">Motivo</a></li>
            <li role="presentation" onclick='activar(this);' id='liTabEnfermedad'><a href="{{ url('neurologia_historia_clinica_homepage', {'idpaciente': paciente.id,'solapa':'Enfermedad'}) }}">Enfermadad Actual</a></li>
            <li role="presentation" onclick='activar(this);' id='liTabAntecedente'><a href="{{ url('neurologia_historia_clinica_homepage', {'idpaciente': paciente.id,'solapa':'Antecedente'}) }}">Antecedente</a></li>
            </ul>
            {% if solapa is defined %}
                {{ solapa|raw }}
                <script>
                        var tab = '{{ tab }}';
                        li = document.getElementById ("ulTab").getElementsByTagName("LI");
                        for(i = 0; i < li.length; ++i){
                                li[i].setAttribute("class", "");
                        }
                        objeto = document.getElementById('liTab'+tab);
                        objeto.setAttribute("class", "active");	
                </script>
            {% endif %}
        {% else %}
            Inicie la historia para empezar
        {% endif %}
        </div>
{% else %}
    error
{% endif %}
{% endblock %}
