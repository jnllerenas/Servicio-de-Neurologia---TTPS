{% extends 'NeurologiaBusquedaBundle:Default:index.html.twig' %}

{% block menubusqueda %}
    
    <div class="panel panel-primary">

        <div class="panel-heading">
            <h3 class="panel-title">B&uacute;squeda de pacientes</h3>
        </div>
        <div class="panel-body">

            {{ form_start(form, {'method': 'GET'}) }}
                <table >
                    <tbody>
                        <tr>
                            <th>{{ form_label(form.nombre) }}</th>
                            <th>{{ form_label(form.apellido) }}</th>
                            <th>{{ form_label(form.documento) }}</th>
                            <th>{{ form_label(form.telefono) }}</th>
                            <th>{{ form_label(form.fechaNacimiento) }}</th>
                            <th>{{ form_errors(form) }}</th>
                        </tr>
                        <tr>
                            <td>{{ form_widget(form.nombre,{ 'attr': {'placeholder': 'Nombre'} }) }}</td>
                            <td>{{ form_widget(form.apellido,{ 'attr': {'placeholder': 'Apellido'} }) }}</td>
                            <td>{{ form_widget(form.documento,{ 'attr': {'placeholder': 'Nro. de documento'} }) }}</td>
                            <td>{{ form_widget(form.telefono,{ 'attr': {'placeholder': 'Teléfono'} }) }}</td>
                            <td>{{ form_widget(form.fechaNacimiento) }}</td>
                            <td>
                                {{ form_widget(form.search,{ 'attr': {'class': 'btn btn-primary'} }) }}
                                {{ form_widget(form.reset,{ 'attr': {'class': 'btn btn-primary'} }) }}
                            </td>
                        </tr>                    
                        <tr>
                            <td>{{ form_errors(form.nombre) }}</td>
                            <td>{{ form_errors(form.apellido) }}</td>
                            <td>{{ form_errors(form.documento) }}</td>
                            <td>{{ form_errors(form.telefono) }}</td>
                            <td>{{ form_errors(form.fechaNacimiento) }}</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            {{ form_end(form) }}

        {% block mensaje %}
            <span>
                {% if valoreselegidos %}
                    {{ valoreselegidos }}
                {% endif %}
            </span>
        {% endblock %}

        {% block lista %}

            <table class="datatable_bootstrap table table-striped table-bordered" cellspacing="0">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>Documento</th>
                        <th>Fecha de nacimiento</th>
                        <th>Telefono</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tupla in lista %}
                        <tr>
                            <td>{{ tupla.nombre }}</td>
                            <td>{{ tupla.apellido }}</td>
                            <td>{{ tupla.documento }}</td>
                            <td>{{ tupla.fechaNacimiento|date('d/m/Y') }}</td>
                            <td>{{ tupla.telefono }}</td>
                            <td>
                                <form method="post" action="{{ path('neurolgia_acceder_paciente') }}">
                                    <input type="hidden" name="paciente_id" value="{{ tupla.id }}">
                                    <button type="submit"  >
                                        <img src="{{- asset('public/images/glyphicons/glyphicons-300-hospital-h.png') -}}" alt="Ver Historia Clínica" title="Ver Historia Clínica"/>
                                        Ver Historia Clínica
                                    </button>
                                </form>
                                <a href="{{- path('paciente_edit', { 'id': tupla.id }) -}}">
                                    <img src="{{- asset('public/images/glyphicons/glyphicons-151-edit.png') -}}" alt="Editar" title="Editar"/>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>     
            </table>

        {% endblock %}
        </div>
    </div>

    <a style="float:right" class="btn btn-primary" href="{{- path('paciente_new') -}}">Nuevo</a>
            
{% endblock %}